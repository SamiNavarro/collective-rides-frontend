"use strict";
/**
 * Club Invitation Types - Phase 2.2
 *
 * Type definitions for club invitation management and dual invitation system.
 * Supports both in-app invitations (existing users) and email invitations (new users).
 *
 * Compliance:
 * - Phase 2.2 Spec: .kiro/specs/phase-2.2.club-membership-roles.v1.md
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.calculateInvitationExpiry = exports.generateInvitationToken = exports.isValidInvitationStatusTransition = exports.INVITATION_STATUS_TRANSITIONS = exports.INVITATION_CONSTRAINTS = exports.InvitationStatus = exports.InvitationType = void 0;
/**
 * Invitation type enumeration
 */
var InvitationType;
(function (InvitationType) {
    InvitationType["EMAIL"] = "email";
    InvitationType["USER"] = "user";
})(InvitationType = exports.InvitationType || (exports.InvitationType = {}));
/**
 * Invitation status enumeration
 */
var InvitationStatus;
(function (InvitationStatus) {
    InvitationStatus["PENDING"] = "pending";
    InvitationStatus["ACCEPTED"] = "accepted";
    InvitationStatus["DECLINED"] = "declined";
    InvitationStatus["EXPIRED"] = "expired";
    InvitationStatus["CANCELLED"] = "cancelled";
})(InvitationStatus = exports.InvitationStatus || (exports.InvitationStatus = {}));
/**
 * Invitation validation constraints
 */
exports.INVITATION_CONSTRAINTS = {
    MESSAGE_MAX_LENGTH: 500,
    DEFAULT_EXPIRY_DAYS: 7,
    MAX_EXPIRY_DAYS: 30,
    TOKEN_LENGTH: 32,
    DEFAULT_LIST_LIMIT: 20,
    MAX_LIST_LIMIT: 100,
};
/**
 * Invitation status transition matrix
 */
exports.INVITATION_STATUS_TRANSITIONS = {
    [InvitationStatus.PENDING]: [InvitationStatus.ACCEPTED, InvitationStatus.DECLINED, InvitationStatus.EXPIRED, InvitationStatus.CANCELLED],
    [InvitationStatus.ACCEPTED]: [],
    [InvitationStatus.DECLINED]: [],
    [InvitationStatus.EXPIRED]: [],
    [InvitationStatus.CANCELLED]: [], // Final state
};
/**
 * Check if invitation status transition is valid
 */
function isValidInvitationStatusTransition(from, to) {
    return exports.INVITATION_STATUS_TRANSITIONS[from].includes(to);
}
exports.isValidInvitationStatusTransition = isValidInvitationStatusTransition;
/**
 * Generate secure invitation token
 */
function generateInvitationToken() {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    for (let i = 0; i < exports.INVITATION_CONSTRAINTS.TOKEN_LENGTH; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return result;
}
exports.generateInvitationToken = generateInvitationToken;
/**
 * Calculate invitation expiry date
 */
function calculateInvitationExpiry(days = exports.INVITATION_CONSTRAINTS.DEFAULT_EXPIRY_DAYS) {
    const expiryDate = new Date();
    expiryDate.setDate(expiryDate.getDate() + days);
    return expiryDate.toISOString();
}
exports.calculateInvitationExpiry = calculateInvitationExpiry;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW52aXRhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludml0YXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7OztHQVFHOzs7QUFJSDs7R0FFRztBQUNILElBQVksY0FHWDtBQUhELFdBQVksY0FBYztJQUN4QixpQ0FBZSxDQUFBO0lBQ2YsK0JBQWEsQ0FBQTtBQUNmLENBQUMsRUFIVyxjQUFjLEdBQWQsc0JBQWMsS0FBZCxzQkFBYyxRQUd6QjtBQUVEOztHQUVHO0FBQ0gsSUFBWSxnQkFNWDtBQU5ELFdBQVksZ0JBQWdCO0lBQzFCLHVDQUFtQixDQUFBO0lBQ25CLHlDQUFxQixDQUFBO0lBQ3JCLHlDQUFxQixDQUFBO0lBQ3JCLHVDQUFtQixDQUFBO0lBQ25CLDJDQUF1QixDQUFBO0FBQ3pCLENBQUMsRUFOVyxnQkFBZ0IsR0FBaEIsd0JBQWdCLEtBQWhCLHdCQUFnQixRQU0zQjtBQTRJRDs7R0FFRztBQUNVLFFBQUEsc0JBQXNCLEdBQUc7SUFDcEMsa0JBQWtCLEVBQUUsR0FBRztJQUN2QixtQkFBbUIsRUFBRSxDQUFDO0lBQ3RCLGVBQWUsRUFBRSxFQUFFO0lBQ25CLFlBQVksRUFBRSxFQUFFO0lBQ2hCLGtCQUFrQixFQUFFLEVBQUU7SUFDdEIsY0FBYyxFQUFFLEdBQUc7Q0FDWCxDQUFDO0FBRVg7O0dBRUc7QUFDVSxRQUFBLDZCQUE2QixHQUFpRDtJQUN6RixDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsU0FBUyxDQUFDO0lBQ3hJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRTtJQUMvQixDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUU7SUFDL0IsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFO0lBQzlCLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxFQUFFLGNBQWM7Q0FDakQsQ0FBQztBQUVGOztHQUVHO0FBQ0gsU0FBZ0IsaUNBQWlDLENBQUMsSUFBc0IsRUFBRSxFQUFvQjtJQUM1RixPQUFPLHFDQUE2QixDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMxRCxDQUFDO0FBRkQsOEVBRUM7QUFFRDs7R0FFRztBQUNILFNBQWdCLHVCQUF1QjtJQUNyQyxNQUFNLEtBQUssR0FBRyxnRUFBZ0UsQ0FBQztJQUMvRSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFDaEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLDhCQUFzQixDQUFDLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUM1RCxNQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztLQUNsRTtJQUNELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFQRCwwREFPQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IseUJBQXlCLENBQUMsT0FBZSw4QkFBc0IsQ0FBQyxtQkFBbUI7SUFDakcsTUFBTSxVQUFVLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUM5QixVQUFVLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNoRCxPQUFPLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUNsQyxDQUFDO0FBSkQsOERBSUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENsdWIgSW52aXRhdGlvbiBUeXBlcyAtIFBoYXNlIDIuMlxuICogXG4gKiBUeXBlIGRlZmluaXRpb25zIGZvciBjbHViIGludml0YXRpb24gbWFuYWdlbWVudCBhbmQgZHVhbCBpbnZpdGF0aW9uIHN5c3RlbS5cbiAqIFN1cHBvcnRzIGJvdGggaW4tYXBwIGludml0YXRpb25zIChleGlzdGluZyB1c2VycykgYW5kIGVtYWlsIGludml0YXRpb25zIChuZXcgdXNlcnMpLlxuICogXG4gKiBDb21wbGlhbmNlOlxuICogLSBQaGFzZSAyLjIgU3BlYzogLmtpcm8vc3BlY3MvcGhhc2UtMi4yLmNsdWItbWVtYmVyc2hpcC1yb2xlcy52MS5tZFxuICovXG5cbmltcG9ydCB7IENsdWJSb2xlIH0gZnJvbSAnLi9tZW1iZXJzaGlwJztcblxuLyoqXG4gKiBJbnZpdGF0aW9uIHR5cGUgZW51bWVyYXRpb25cbiAqL1xuZXhwb3J0IGVudW0gSW52aXRhdGlvblR5cGUge1xuICBFTUFJTCA9ICdlbWFpbCcsICAgICAvLyBFbWFpbCBpbnZpdGF0aW9uIGZvciBuZXcgdXNlcnNcbiAgVVNFUiA9ICd1c2VyJywgICAgICAgLy8gSW4tYXBwIGludml0YXRpb24gZm9yIGV4aXN0aW5nIHVzZXJzXG59XG5cbi8qKlxuICogSW52aXRhdGlvbiBzdGF0dXMgZW51bWVyYXRpb25cbiAqL1xuZXhwb3J0IGVudW0gSW52aXRhdGlvblN0YXR1cyB7XG4gIFBFTkRJTkcgPSAncGVuZGluZycsICAgICAvLyBJbnZpdGF0aW9uIHNlbnQsIGF3YWl0aW5nIHJlc3BvbnNlXG4gIEFDQ0VQVEVEID0gJ2FjY2VwdGVkJywgICAvLyBJbnZpdGF0aW9uIGFjY2VwdGVkXG4gIERFQ0xJTkVEID0gJ2RlY2xpbmVkJywgICAvLyBJbnZpdGF0aW9uIGRlY2xpbmVkXG4gIEVYUElSRUQgPSAnZXhwaXJlZCcsICAgICAvLyBJbnZpdGF0aW9uIGV4cGlyZWRcbiAgQ0FOQ0VMTEVEID0gJ2NhbmNlbGxlZCcsIC8vIEludml0YXRpb24gY2FuY2VsbGVkIGJ5IGFkbWluXG59XG5cbi8qKlxuICogQ29yZSBjbHViIGludml0YXRpb24gZW50aXR5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ2x1Ykludml0YXRpb24ge1xuICBpbnZpdGF0aW9uSWQ6IHN0cmluZztcbiAgdHlwZTogSW52aXRhdGlvblR5cGU7XG4gIGNsdWJJZDogc3RyaW5nO1xuICBlbWFpbD86IHN0cmluZzsgICAgICAgIC8vIEZvciBlbWFpbCBpbnZpdGF0aW9uc1xuICB1c2VySWQ/OiBzdHJpbmc7ICAgICAgIC8vIEZvciB1c2VyIGludml0YXRpb25zIChzZXQgd2hlbiBhY2NlcHRlZCBmb3IgZW1haWwgaW52aXRhdGlvbnMpXG4gIHJvbGU6IENsdWJSb2xlO1xuICBzdGF0dXM6IEludml0YXRpb25TdGF0dXM7XG4gIGludml0ZWRCeTogc3RyaW5nO1xuICBpbnZpdGVkQXQ6IHN0cmluZztcbiAgZXhwaXJlc0F0OiBzdHJpbmc7XG4gIHByb2Nlc3NlZEF0Pzogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICB0b2tlbj86IHN0cmluZzsgICAgICAgIC8vIFNlY3VyZSB0b2tlbiBmb3IgZW1haWwgaW52aXRhdGlvbnNcbiAgZGVsaXZlcnlNZXRob2Q6ICdlbWFpbCcgfCAnaW5fYXBwJztcbn1cblxuLyoqXG4gKiBJbnB1dCBmb3IgY3JlYXRpbmcgZW1haWwgaW52aXRhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUVtYWlsSW52aXRhdGlvbklucHV0IHtcbiAgdHlwZTogJ2VtYWlsJztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogQ2x1YlJvbGU7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW5wdXQgZm9yIGNyZWF0aW5nIHVzZXIgaW52aXRhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVVzZXJJbnZpdGF0aW9uSW5wdXQge1xuICB0eXBlOiAndXNlcic7XG4gIHVzZXJJZDogc3RyaW5nO1xuICByb2xlOiBDbHViUm9sZTtcbiAgbWVzc2FnZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBVbmlvbiB0eXBlIGZvciBpbnZpdGF0aW9uIGNyZWF0aW9uXG4gKi9cbmV4cG9ydCB0eXBlIENyZWF0ZUludml0YXRpb25JbnB1dCA9IENyZWF0ZUVtYWlsSW52aXRhdGlvbklucHV0IHwgQ3JlYXRlVXNlckludml0YXRpb25JbnB1dDtcblxuLyoqXG4gKiBJbnB1dCBmb3IgcHJvY2Vzc2luZyBpbnZpdGF0aW9uIChhY2NlcHQvZGVjbGluZSlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcm9jZXNzSW52aXRhdGlvbklucHV0IHtcbiAgYWN0aW9uOiAnYWNjZXB0JyB8ICdkZWNsaW5lJztcbn1cblxuLyoqXG4gKiBJbnB1dCBmb3IgcHJvY2Vzc2luZyBqb2luIHJlcXVlc3QgKGFwcHJvdmUvcmVqZWN0KVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb2Nlc3NKb2luUmVxdWVzdElucHV0IHtcbiAgYWN0aW9uOiAnYXBwcm92ZScgfCAncmVqZWN0JztcbiAgbWVzc2FnZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBVc2VyJ3MgaW52aXRhdGlvbiBzdW1tYXJ5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckludml0YXRpb25TdW1tYXJ5IHtcbiAgaW52aXRhdGlvbklkOiBzdHJpbmc7XG4gIGNsdWJJZDogc3RyaW5nO1xuICBjbHViTmFtZTogc3RyaW5nO1xuICBjbHViTG9nb1VybD86IHN0cmluZztcbiAgcm9sZTogQ2x1YlJvbGU7XG4gIHN0YXR1czogSW52aXRhdGlvblN0YXR1cztcbiAgaW52aXRlZEJ5OiBzdHJpbmc7XG4gIGludml0ZWRCeU5hbWU6IHN0cmluZztcbiAgaW52aXRlZEF0OiBzdHJpbmc7XG4gIGV4cGlyZXNBdDogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIGxpc3RpbmcgaW52aXRhdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMaXN0SW52aXRhdGlvbnNPcHRpb25zIHtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIGN1cnNvcj86IHN0cmluZztcbiAgc3RhdHVzPzogSW52aXRhdGlvblN0YXR1cztcbn1cblxuLyoqXG4gKiBSZXN1bHQgb2YgaW52aXRhdGlvbiBsaXN0aW5nIG9wZXJhdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIExpc3RJbnZpdGF0aW9uc1Jlc3VsdCB7XG4gIGludml0YXRpb25zOiBVc2VySW52aXRhdGlvblN1bW1hcnlbXTtcbiAgbmV4dEN1cnNvcj86IHN0cmluZztcbn1cblxuLyoqXG4gKiBEeW5hbW9EQiBjbHViIGludml0YXRpb24gaXRlbSBzdHJ1Y3R1cmUgKGNhbm9uaWNhbClcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnZpdGF0aW9uRHluYW1vSXRlbSB7XG4gIFBLOiBzdHJpbmc7ICAgICAgICAgICAvLyBJTlZJVEFUSU9OI3tpbnZpdGF0aW9uSWR9XG4gIFNLOiBzdHJpbmc7ICAgICAgICAgICAvLyBNRVRBREFUQVxuICBlbnRpdHlUeXBlOiBzdHJpbmc7ICAgLy8gQ0xVQl9JTlZJVEFUSU9OXG4gIGludml0YXRpb25JZDogc3RyaW5nO1xuICB0eXBlOiBJbnZpdGF0aW9uVHlwZTtcbiAgY2x1YklkOiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIHJvbGU6IENsdWJSb2xlO1xuICBzdGF0dXM6IEludml0YXRpb25TdGF0dXM7XG4gIGludml0ZWRCeTogc3RyaW5nO1xuICBpbnZpdGVkQXQ6IHN0cmluZztcbiAgZXhwaXJlc0F0OiBzdHJpbmc7XG4gIHByb2Nlc3NlZEF0Pzogc3RyaW5nO1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICB0b2tlbj86IHN0cmluZztcbiAgZGVsaXZlcnlNZXRob2Q6ICdlbWFpbCcgfCAnaW5fYXBwJztcbn1cblxuLyoqXG4gKiBEeW5hbW9EQiB1c2VyIGludml0YXRpb24gaW5kZXggaXRlbSBzdHJ1Y3R1cmUgKGZvciBpbi1hcHAgaW52aXRhdGlvbnMpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckludml0YXRpb25EeW5hbW9JdGVtIHtcbiAgUEs6IHN0cmluZzsgICAgICAgICAgIC8vIFVTRVIje3VzZXJJZH1cbiAgU0s6IHN0cmluZzsgICAgICAgICAgIC8vIElOVklUQVRJT04je2ludml0YXRpb25JZH1cbiAgR1NJMVBLOiBzdHJpbmc7ICAgICAgIC8vIFVTRVIje3VzZXJJZH1cbiAgR1NJMVNLOiBzdHJpbmc7ICAgICAgIC8vIElOVklUQVRJT04je2ludml0YXRpb25JZH1cbiAgZW50aXR5VHlwZTogc3RyaW5nOyAgIC8vIFVTRVJfSU5WSVRBVElPTlxuICBpbnZpdGF0aW9uSWQ6IHN0cmluZztcbiAgY2x1YklkOiBzdHJpbmc7XG4gIGNsdWJOYW1lOiBzdHJpbmc7XG4gIHJvbGU6IENsdWJSb2xlO1xuICBzdGF0dXM6IEludml0YXRpb25TdGF0dXM7XG4gIGludml0ZWRCeTogc3RyaW5nO1xuICBpbnZpdGVkQnlOYW1lOiBzdHJpbmc7XG4gIGludml0ZWRBdDogc3RyaW5nO1xuICBleHBpcmVzQXQ6IHN0cmluZztcbiAgbWVzc2FnZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnZpdGF0aW9uIHZhbGlkYXRpb24gY29uc3RyYWludHNcbiAqL1xuZXhwb3J0IGNvbnN0IElOVklUQVRJT05fQ09OU1RSQUlOVFMgPSB7XG4gIE1FU1NBR0VfTUFYX0xFTkdUSDogNTAwLFxuICBERUZBVUxUX0VYUElSWV9EQVlTOiA3LFxuICBNQVhfRVhQSVJZX0RBWVM6IDMwLFxuICBUT0tFTl9MRU5HVEg6IDMyLFxuICBERUZBVUxUX0xJU1RfTElNSVQ6IDIwLFxuICBNQVhfTElTVF9MSU1JVDogMTAwLFxufSBhcyBjb25zdDtcblxuLyoqXG4gKiBJbnZpdGF0aW9uIHN0YXR1cyB0cmFuc2l0aW9uIG1hdHJpeFxuICovXG5leHBvcnQgY29uc3QgSU5WSVRBVElPTl9TVEFUVVNfVFJBTlNJVElPTlM6IFJlY29yZDxJbnZpdGF0aW9uU3RhdHVzLCBJbnZpdGF0aW9uU3RhdHVzW10+ID0ge1xuICBbSW52aXRhdGlvblN0YXR1cy5QRU5ESU5HXTogW0ludml0YXRpb25TdGF0dXMuQUNDRVBURUQsIEludml0YXRpb25TdGF0dXMuREVDTElORUQsIEludml0YXRpb25TdGF0dXMuRVhQSVJFRCwgSW52aXRhdGlvblN0YXR1cy5DQU5DRUxMRURdLFxuICBbSW52aXRhdGlvblN0YXR1cy5BQ0NFUFRFRF06IFtdLCAvLyBGaW5hbCBzdGF0ZVxuICBbSW52aXRhdGlvblN0YXR1cy5ERUNMSU5FRF06IFtdLCAvLyBGaW5hbCBzdGF0ZVxuICBbSW52aXRhdGlvblN0YXR1cy5FWFBJUkVEXTogW10sIC8vIEZpbmFsIHN0YXRlXG4gIFtJbnZpdGF0aW9uU3RhdHVzLkNBTkNFTExFRF06IFtdLCAvLyBGaW5hbCBzdGF0ZVxufTtcblxuLyoqXG4gKiBDaGVjayBpZiBpbnZpdGF0aW9uIHN0YXR1cyB0cmFuc2l0aW9uIGlzIHZhbGlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkSW52aXRhdGlvblN0YXR1c1RyYW5zaXRpb24oZnJvbTogSW52aXRhdGlvblN0YXR1cywgdG86IEludml0YXRpb25TdGF0dXMpOiBib29sZWFuIHtcbiAgcmV0dXJuIElOVklUQVRJT05fU1RBVFVTX1RSQU5TSVRJT05TW2Zyb21dLmluY2x1ZGVzKHRvKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBzZWN1cmUgaW52aXRhdGlvbiB0b2tlblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVJbnZpdGF0aW9uVG9rZW4oKTogc3RyaW5nIHtcbiAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgSU5WSVRBVElPTl9DT05TVFJBSU5UUy5UT0tFTl9MRU5HVEg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgaW52aXRhdGlvbiBleHBpcnkgZGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlSW52aXRhdGlvbkV4cGlyeShkYXlzOiBudW1iZXIgPSBJTlZJVEFUSU9OX0NPTlNUUkFJTlRTLkRFRkFVTFRfRVhQSVJZX0RBWVMpOiBzdHJpbmcge1xuICBjb25zdCBleHBpcnlEYXRlID0gbmV3IERhdGUoKTtcbiAgZXhwaXJ5RGF0ZS5zZXREYXRlKGV4cGlyeURhdGUuZ2V0RGF0ZSgpICsgZGF5cyk7XG4gIHJldHVybiBleHBpcnlEYXRlLnRvSVNPU3RyaW5nKCk7XG59Il19